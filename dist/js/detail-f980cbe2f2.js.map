{"version":3,"sources":["detail.js"],"names":["$","spu_id","search","name","start","indexOf","end","length","substring","split","valueByName","location","reload","res","Array","data","home_floors","listsinfo","item1","tabs","tab_items","find","item","spu","id","console","log","lazyload","placeholder","effect","ajax","url","success","dataType"],"mappings":"AAAA,aAEAA,EAAE,WACA,IAQmBC,EAJfA,EAiGJ,SAAqBC,EAAQC,GAC3B,IAAIC,EAAQF,EAAOG,QAAQF,EAAO,KAElC,CAAA,IAAc,GAAVC,EACF,OAAO,KAEP,IAAIE,EAAMJ,EAAOG,QAAQ,IAAKD,GAS9B,OAPY,GAARE,IACFA,EAAMJ,EAAOK,QAILL,EAAOM,UAAUJ,EAAOE,GACpBG,MAAM,KACT,IAhHFC,CAAYC,SAAST,OAAQ,UAexC,SAASU,EAAOC,GAEF,IAAIC,MACLD,EAAIE,KAAKC,YAFpB,IASIC,EAFQC,MAAMC,KAAK,GAAGC,UAEJC,KAAK,SAAUC,GACnC,OAAOA,EAAKC,IAAIC,KAAOvB,IAEzBwB,QAAQC,IAAIT,GA4DZjB,EAAE,0BAA0B2B,SAAS,CACnCC,YAAa,yLACbC,OAAQ,WAzFdJ,QAAQC,IAAIzB,GAGOA,EAFTA,EAUN6B,KANc,CAEZC,IAAK,sCACLC,QAASpB,EACTqB,SAAU","file":"detail-f980cbe2f2.js","sourcesContent":["\"use strict\";\n\n$(function () {\n  var detal_timer = null; //事件监听\n  // console.log(1)\n  // location.href = \"../html/detail.html\";\n\n  var spu_id = valueByName(location.search, \"spu_id\");\n  console.log(spu_id);\n  datalists(spu_id);\n\n  function datalists(spu_id) {\n    function list() {\n      var options = {\n        // http://303z9z3029.qicp.vip/\n        url: \"http://303z9z3029.qicp.vip/datalist\",\n        success: reload,\n        dataType: \"json\"\n      };\n      ajax(options);\n    }\n\n    function reload(res) {\n      var i = 0;\n      var myarr = new Array();\n      var data = res.data.home_floors;\n      var flage = true; // console.log(data)\n\n      var html = \"\";\n      var j = 0;\n      var conts = item1.tabs[0].tab_items; // console.log(data) \n\n      var listsinfo = conts.find(function (item) {\n        return item.spu.id === spu_id;\n      });\n      console.log(listsinfo); // data.forEach(function (item1, index1) {\n      //   // console.log(item1, index1)\n      //   var title = item1.title;\n      //   var cont = item1.tabs[0].tab_items.length\n      //   // console.log(cont)\n      //   //渲染外层结构\n      //   // console.log($(\"#jakeby\").eq(1))\n      //   var img_index = \"#\" + index1 + \" .advertise-img\"\n      //   item1.tabs[0].tab_items.forEach((item, index) => {\n      //     //获取到数据，根据不同区域进行渲染  可以进行条件判断，对位置进行定位\n      //     if (index === 0) {\n      //       $(` <div class=\"common-normal-box\" id=\"${index1}\" >\n      //     <div class=\"header\">\n      //       <h5>${title}</h5>\n      //     </div>\n      //     <div class=\"prduct-list\" id=\"prduct-list\">\n      //       <div class=\"advertise-img\" >\n      //         <img\n      //         data-original=\"${item.image}\"\n      //           alt=\"\"\n      //         />\n      //         </div>\n      //         </div>\n      //         </div>\n      //       `).insertBefore(\".app-wrap #footer_container\");\n      //     } else if (flage && index < cont) {\n      //       // console.log(i)\n      //       // console.log(img_index)\n      //       $(` <div class=\"list-duct\" spu-id=\"${item.spu.id}\">\n      //     <a href=\"../html/detail.html?spu_id=${item.spu.id}\">\n      //             <figure class=\"item-cover\">\n      //               <img\n      //               data-original=\"${item.spu.sku_info[0].ali_image}\"\n      //                 lazy=\"loaded\"\n      //               />\n      //             </figure>\n      //     </a>\n      //             <article class=\"artivle\">\n      //             <a href=\"../html/detail.html?spu-id=\"${item.spu.id}\">\n      //               <h3>${item.spu.name}</h3>\n      //               <h5 class=\"txt-product-title\">\n      //               ${item.spu.sku_info[0].sub_title}\n      //               </h5>\n      //               </a>\n      //             </article>\n      //             <aside class=\"item-attr-colors\"></aside>\n      //             <!-- 价格 -->\n      //             <article class=\"item-price\">\n      //               <span>￥${item.spu.price}</span>\n      //               <!-- <span class=\"orignal-price\">￥${item.spu.price}</span> -->\n      //             </article>\n      //           </div>`)\n      //         .insertAfter(img_index)\n      //       // $(\"divdata_index=\"${index1}])\n      //     }\n      //   })\n      // });\n      // console.log(myarr)\n      // _(\"#dyduct-list\").innerHTML = html;\n\n      $(\".common-normal-box img\").lazyload({\n        placeholder: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",\n        effect: \"fadeIn\"\n      });\n    }\n\n    list();\n  }\n\n  function valueByName(search, name) {\n    var start = search.indexOf(name + \"=\");\n\n    if (start == -1) {\n      return null;\n    } else {\n      var end = search.indexOf(\"&\", start);\n\n      if (end == -1) {\n        end = search.length;\n      } //提取出想要键值对 name=value\n\n\n      var str = search.substring(start, end);\n      var arr = str.split(\"=\");\n      return arr[1];\n    }\n\n    $(\"#shoplist\").mousemove(function () {\n      var _this = this;\n\n      if (localStorage.getItem(\"flage\")) {\n        clearTimeout(hide_timer);\n        hide_timer = setTimeout(function () {\n          $(\".shop-list\").addClass(\"show-list\");\n          $(_this).css({\n            cursor: \"pointer\"\n          });\n        }, 200);\n        return false;\n      }\n    }); //定时器\n\n    $(\"#shoplist\").mouseleave(function () {\n      // flag = true;\n      clearTimeout(hide_timer);\n      hide_timer = setTimeout(function () {\n        $(\".shop-list\").removeClass(\"show-list\");\n      }, 200);\n    });\n    $(\"#shoplist\").on('click', function () {\n      if (localStorage.getItem(\"flage\")) {\n        location.href = \"../html/shopcar.html\"; // window.location.reload()\n      } else {\n        alert(\"您还未登录\"); // console.log(1)\n      }\n    });\n    $(\".shop-list\").mousemove(function () {\n      clearTimeout(hide_timer);\n    });\n    $(\".shop-list\").mouseout(function () {\n      clearInterval(hide_timer);\n      hide_timer = setInterval(function () {\n        $(\".shop-list\").removeClass(\"show-list\");\n      }, 200);\n    });\n  }\n});"]}